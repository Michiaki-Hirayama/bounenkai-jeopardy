<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>問題編集 - 社長室 Jeopardy</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">問題編集</h1>
            <div class="header-actions">
                <a href="index.html" class="btn btn-secondary">ゲーム画面へ</a>
                <a href="scoreboard/" class="btn btn-secondary">スコアボード</a>
            </div>
        </header>
        
        <!-- データ管理エリア -->
        <section class="data-management">
            <div class="data-actions">
                <button id="export-btn" class="btn btn-primary">
                    📥 エクスポート
                </button>
                <label class="btn btn-primary">
                    📤 インポート
                    <input type="file" id="import-input" accept=".json" hidden>
                </label>
                <button id="reset-btn" class="btn btn-danger">
                    🗑️ 全データ削除
                </button>
            </div>
        </section>
        
        <!-- カテゴリー管理 -->
        <section class="category-section">
            <h2>カテゴリー管理</h2>
            <div class="category-add">
                <input type="text" id="new-category-name" placeholder="新しいカテゴリー名" class="input">
                <button id="add-category-btn" class="btn btn-success">追加</button>
            </div>
            <div id="category-list" class="category-list"></div>
        </section>
        
        <!-- 問題一覧 -->
        <section class="questions-section">
            <h2>問題一覧</h2>
            <div id="questions-container" class="questions-container"></div>
        </section>
    </div>
    
    <!-- 問題編集モーダル -->
    <div id="question-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">問題を編集</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="question-form">
                    <input type="hidden" id="question-id">
                    
                    <div class="form-group">
                        <label>カテゴリー</label>
                        <select id="question-category" class="input" required></select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>順番 (1-5)</label>
                            <input type="number" id="question-order" class="input" min="1" max="5" required>
                        </div>
                        <div class="form-group">
                            <label>得点</label>
                            <select id="question-points" class="input" required>
                                <option value="10">10GW</option>
                                <option value="20">20GW</option>
                                <option value="30">30GW</option>
                                <option value="40">40GW</option>
                                <option value="50">50GW</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>問題文</label>
                        <textarea id="question-text" class="input textarea" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>正解</label>
                        <input type="text" id="question-answer" class="input" required>
                    </div>
                    
                    <div class="form-group">
                        <label>解説</label>
                        <textarea id="question-explanation" class="input textarea" rows="2"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>メディア（画像・動画）</label>
                        <div class="media-upload">
                            <input type="file" id="question-media" accept="image/*,video/*" class="file-input">
                            <div id="media-preview" class="media-preview"></div>
                            <button type="button" id="remove-media-btn" class="btn btn-sm btn-danger" style="display: none;">メディアを削除</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="question-enabled" checked>
                            有効（チェックを外すと非表示）
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">キャンセル</button>
                <button type="button" class="btn btn-primary" onclick="saveQuestion()">保存</button>
            </div>
        </div>
    </div>
    
    <script src="db.js"></script>
    <script src="admin.js"></script>
</body>
</html>
